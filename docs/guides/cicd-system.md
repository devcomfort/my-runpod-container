# ğŸš€ No PR ì§ì ‘ ë¨¸ì§€ CI/CD ì‹œìŠ¤í…œ ì™„ë²½ ê°€ì´ë“œ

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” **ê°œì¸ ì‘ì—…ì— ìµœì í™”ëœ ì´ˆë‹¨ìˆœ CI/CD íŒŒì´í”„ë¼ì¸**ì„ ìš´ì˜í•©ë‹ˆë‹¤. PR ë‹¨ê³„ë¥¼ ì™„ì „íˆ ì œê±°í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì´ê³ , ë” ë¹ ë¥´ê³  íš¨ìœ¨ì ì¸ ê°œë°œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ğŸ¯ í•µì‹¬ íŠ¹ì§•

- **ğŸš« No PR**: Pull Request ë‹¨ê³„ ì™„ì „ ì œê±°
- **âš¡ ë¹ ë¥¸ ë°°í¬**: í…ŒìŠ¤íŠ¸ í†µê³¼ ì¦‰ì‹œ main ë¸Œëœì¹˜ ë°˜ì˜
- **ğŸ¤– ì™„ì „ ìë™í™”**: ê°œë°œìëŠ” devì— pushë§Œ í•˜ë©´ ë¨
- **ğŸ›¡ï¸ ì•ˆì „ì„± í™•ë³´**: ëª¨ë“  ì²´í¬ í†µê³¼ ì‹œì—ë§Œ ë¨¸ì§€

## ğŸ”„ ì›Œí¬í”Œë¡œìš° ì•„í‚¤í…ì²˜

```mermaid
graph TD
    A["ğŸ‘¨â€ğŸ’» ê°œë°œì"] --> B["dev ë¸Œëœì¹˜ push"]
    B --> C["âš¡ GitHub Actions íŠ¸ë¦¬ê±°"]
    
    C --> D["ğŸ§ª Shell Tests<br/>(73ê°œ í…ŒìŠ¤íŠ¸)"]
    C --> E["ğŸ³ Docker Build<br/>(ë©€í‹° ì•„í‚¤í…ì²˜)"]
    
    D --> F{ëª¨ë“  ì²´í¬<br/>ì„±ê³µ?}
    E --> F
    
    F -->|âœ… ì„±ê³µ| G["ğŸš€ git merge --no-ff<br/>dev â†’ main"]
    F -->|âŒ ì‹¤íŒ¨| H["ğŸš« ë¨¸ì§€ ì¤‘ë‹¨<br/>ë¡œê·¸ í™•ì¸"]
    
    G --> I["ğŸ“š main ë¸Œëœì¹˜<br/>ì•„ì¹´ì´ë¸Œ ì™„ë£Œ"]
    
    H --> J["ğŸ”§ ë¬¸ì œ ìˆ˜ì •"]
    J --> K["ğŸ“ ë‹¤ì‹œ push"]
    K --> B
    
    style A fill:#e3f2fd
    style G fill:#e8f5e8
    style I fill:#f3e5f5
    style H fill:#ffebee
```

## ğŸ“Š ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ

### ğŸ”§ GitHub Actions ì›Œí¬í”Œë¡œìš°

| ì›Œí¬í”Œë¡œìš° | íŒŒì¼ | ì—­í•  | íŠ¸ë¦¬ê±° |
|-----------|------|------|--------|
| **Build and Push** | `build-and-push.yml` | Docker ë¹Œë“œ & í…ŒìŠ¤íŠ¸ | dev push |
| **Shell Tests** | `shell-tests.yml` | Shell ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ | dev push |
| **Direct Merge** | `dev-to-main-direct-merge.yml` | ì„±ê³µ ì‹œ ì§ì ‘ ë¨¸ì§€ | ìœ„ ë‘ ì›Œí¬í”Œë¡œìš° ì„±ê³µ |

### ğŸŒ¿ ë¸Œëœì¹˜ ì „ëµ

```bash
# ğŸ¯ ê·¹ë‹¨ì ìœ¼ë¡œ ë‹¨ìˆœí™”ëœ ë¸Œëœì¹˜ êµ¬ì¡°
main    # ğŸ“š ì•ˆì •ëœ ì•„ì¹´ì´ë¸Œ (ìë™ ë¨¸ì§€ ì „ìš©, ì½ê¸° ì „ìš©)
dev     # ğŸš€ í™œë°œí•œ ê°œë°œ (ë©”ì¸ ì‘ì—… ë¸Œëœì¹˜, ê°œë°œì í™œë™)

# í•„ìš”ì‹œ ì‚¬ìš©
feature/*  # devì—ì„œ ë¶„ê¸° â†’ devë¡œ ë¨¸ì§€
bugfix/*   # devì—ì„œ ë¶„ê¸° â†’ devë¡œ ë¨¸ì§€
```

## ğŸ› ï¸ ê°œë°œì ì›Œí¬í”Œë¡œìš°

### ğŸ“… ì¼ìƒì ì¸ ê°œë°œ ê³¼ì •

```bash
# ğŸŒ… ì•„ì¹¨: ìµœì‹  ìƒíƒœë¡œ ë™ê¸°í™”
git checkout dev
git pull origin dev

# ğŸ’» ê°œë°œ: ê¸°ëŠ¥ êµ¬í˜„ ë° ë¡œì»¬ í…ŒìŠ¤íŠ¸
just dev-setup      # ê°œë°œ í™˜ê²½ ì„¤ì •
just test           # ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
just cpu            # ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸

# âœ… ì™„ë£Œ: ì»¤ë°‹ ë° í‘¸ì‹œ (ëª¨ë“  ìë™í™” ì‹œì‘!)
git add .
git commit -m "feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ êµ¬í˜„"
git push origin dev  # ğŸš€ ì´ ìˆœê°„ ëª¨ë“  ê²ƒì´ ìë™ìœ¼ë¡œ!

# ğŸ“Š ëª¨ë‹ˆí„°ë§: GitHub Actionsì—ì„œ ì§„í–‰ ìƒí™© í™•ì¸
# https://github.com/your-repo/actions
```

### ğŸ”„ ìë™í™” í”„ë¡œì„¸ìŠ¤

#### âœ… **ì„±ê³µ ì‹œë‚˜ë¦¬ì˜¤**
```bash
1. dev push ì™„ë£Œ
2. ğŸ§ª Shell Tests ì‹¤í–‰ (73ê°œ ì¼€ì´ìŠ¤) â†’ âœ… í†µê³¼
3. ğŸ³ Docker Build ì‹¤í–‰ (ë©€í‹° ì•„í‚¤í…ì²˜) â†’ âœ… ì„±ê³µ
4. ğŸš€ ìë™ìœ¼ë¡œ mainì— git merge --no-ff
5. ğŸ“š main ë¸Œëœì¹˜ ì•„ì¹´ì´ë¸Œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
6. ğŸ‰ ì™„ë£Œ! (ì•½ 5-8ë¶„ ì†Œìš”)
```

#### âŒ **ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤**
```bash
1. dev push ì™„ë£Œ
2. ğŸ§ª Shell Tests ë˜ëŠ” ğŸ³ Docker Build ì‹¤íŒ¨
3. ğŸš« main ë¨¸ì§€ ì¤‘ë‹¨
4. ğŸ“ GitHub Actions ë¡œê·¸ì—ì„œ ì‹¤íŒ¨ ì›ì¸ í™•ì¸
5. ğŸ”§ ë¡œì»¬ì—ì„œ ë¬¸ì œ ìˆ˜ì •
6. ğŸ“ ë‹¤ì‹œ push â†’ ìë™ ì¬ì‹œë„
```

## ğŸ¯ ì‹œìŠ¤í…œ ì¥ì 

### ğŸ’¨ **ì†ë„ ê°œì„ **

| ë‹¨ê³„ | ê¸°ì¡´ PR ë°©ì‹ | No PR ì§ì ‘ ë¨¸ì§€ | ì‹œê°„ ì ˆì•½ |
|------|-------------|----------------|-----------|
| ê°œë°œ ì™„ë£Œ | dev push | dev push | - |
| ê²€ì¦ | í…ŒìŠ¤íŠ¸ + ë¹Œë“œ | í…ŒìŠ¤íŠ¸ + ë¹Œë“œ | - |
| PR ìƒì„± | ìˆ˜ë™ ìƒì„± | âŒ ìƒëµ | **2ë¶„** |
| PR ìŠ¹ì¸ | ìˆ˜ë™ ìŠ¹ì¸ | âŒ ìƒëµ | **3ë¶„** |
| ë¨¸ì§€ ì‹¤í–‰ | ìˆ˜ë™ í´ë¦­ | ìë™ ì‹¤í–‰ | **1ë¶„** |
| **ì´ ì‹œê°„** | **ì•½ 10-15ë¶„** | **ì•½ 5-8ë¶„** | **40-50% ë‹¨ì¶•** |

### ğŸ¯ **ë³µì¡ì„± ì œê±°**

```bash
# âŒ ê¸°ì¡´ ë³µì¡í•œ ê³¼ì •
git push origin feature-branch
# â†’ GitHubì—ì„œ PR ìƒì„±
# â†’ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ëŒ€ê¸°
# â†’ ìˆ˜ë™ ìŠ¹ì¸
# â†’ ë¨¸ì§€ í´ë¦­
# â†’ ë¸Œëœì¹˜ ì‚­ì œ

# âœ… ìƒˆë¡œìš´ ë‹¨ìˆœí•œ ê³¼ì •
git push origin dev
# â†’ ëª¨ë“  ê²ƒì´ ìë™ìœ¼ë¡œ ì™„ë£Œ! ğŸ‰
```

### ğŸš€ **ê°œì¸ í”„ë¡œì íŠ¸ ìµœì í™”**

- **ì½”ë“œ ë¦¬ë·° ë¶ˆí•„ìš”**: ê°œì¸ í”„ë¡œì íŠ¸ì—ì„œ self-reviewëŠ” ë¹„íš¨ìœ¨ì 
- **ìŠ¹ì¸ ë‹¨ê³„ ì œê±°**: í˜¼ì ì‘ì—…í•  ë•Œ ìŠ¹ì¸ì€ í˜•ì‹ì  ì ˆì°¨
- **ë¸Œëœì¹˜ ê´€ë¦¬ ë‹¨ìˆœí™”**: ë³µì¡í•œ ë¸Œëœì¹˜ ì „ëµ ë¶ˆí•„ìš”
- **ì¦‰ì‹œ ë°°í¬**: ì•„ì´ë””ì–´ â†’ êµ¬í˜„ â†’ ë°°í¬ê¹Œì§€ ìµœë‹¨ ì‹œê°„

## ğŸ›¡ï¸ ì•ˆì „ì„± ë³´ì¥

### ğŸ” **ì—„ê²©í•œ ìë™ ê²€ì¦**

```yaml
í•„ìˆ˜ í†µê³¼ ì¡°ê±´:
  ğŸ§ª Shell Tests:
    - Unit Tests (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)
    - Mocked Tests (ëª¨í‚¹ í…ŒìŠ¤íŠ¸)  
    - Integration Tests (í†µí•© í…ŒìŠ¤íŠ¸)
    - ì´ 73ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
    
  ğŸ³ Docker Build:
    - CPU ì•„í‚¤í…ì²˜ ë¹Œë“œ
    - CUDA 11.1.1, 11.8.0, 12.x.x ë¹Œë“œ
    - linux/amd64, linux/arm64 ë©€í‹° ì•„í‚¤í…ì²˜
    - ëª¨ë“  íƒ€ê²Ÿ ì„±ê³µ í•„ìˆ˜
```

### ğŸš« **ì‹¤íŒ¨ ì‹œ ë³´í˜¸**

- **Zero Tolerance**: í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ë¨¸ì§€ ì¤‘ë‹¨
- **ëª…í™•í•œ ë¡œê·¸**: ì‹¤íŒ¨ ì›ì¸ ìƒì„¸ ì¶œë ¥
- **ì•ˆì „í•œ ë¡¤ë°±**: main ë¸Œëœì¹˜ì— ì˜í–¥ ì—†ìŒ
- **ì¬ì‹œë„ ìë™í™”**: ìˆ˜ì • í›„ pushí•˜ë©´ ìë™ ì¬ê²€ì¦

## âš™ï¸ ì„¤ì • ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ğŸ”§ **í•„ìˆ˜ ì„¤ì •**

#### GitHub Secrets
```bash
Repository > Settings > Secrets and variables > Actions

Required:
  DOCKER_HUB_USERNAME    # Docker Hub ì‚¬ìš©ìëª…
  DOCKER_HUB_TOKEN       # Docker Hub ì•¡ì„¸ìŠ¤ í† í°
  
Auto-provided:
  GITHUB_TOKEN           # GitHubì—ì„œ ìë™ ì œê³µ
```

#### Branch Protection (ì„ íƒì‚¬í•­)
```bash
# main ë¸Œëœì¹˜ ë³´í˜¸ (ê¶Œì¥)
Repository > Settings > Branches > Add rule

Branch name pattern: main
Restrictions:
  âœ… Restrict pushes that create files larger than 100MB
  âŒ Require pull request reviews (No PR ì‹œìŠ¤í…œì´ë¯€ë¡œ ë¶ˆí•„ìš”)
  âŒ Require status checks (ìë™ ë¨¸ì§€ê°€ ì´ë¯¸ ê²€ì¦í•¨)
```

### ğŸ›ï¸ **ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜µì…˜**

#### í…ŒìŠ¤íŠ¸ ì¶”ê°€
```yaml
# .github/workflows/dev-to-main-direct-merge.ymlì—ì„œ
REQUIRED_WORKFLOWS=("ğŸ³ Build and Push Multi-Architecture Images" "ğŸ§ª Shell Tests" "ìƒˆë¡œìš´ ì›Œí¬í”Œë¡œìš°")
```

#### ì¡°ê±´ ìˆ˜ì •
```yaml
# íŠ¹ì • ì¡°ê±´ì—ì„œë§Œ ë¨¸ì§€
if: |
  github.event.workflow_run.conclusion == 'success' &&
  github.event.workflow_run.head_branch == 'dev' &&
  !contains(github.event.head_commit.message, '[skip-merge]')
```

## ğŸš¨ ë¬¸ì œ í•´ê²°

### ğŸ“Š **ëª¨ë‹ˆí„°ë§ ë„êµ¬**

```bash
# GitHub Actions ìƒíƒœ í™•ì¸
https://github.com/your-repo/actions

# GitHub CLI ì‚¬ìš©
gh run list --branch dev
gh run view <run-id> --log

# ì‹¤íŒ¨í•œ ì›Œí¬í”Œë¡œìš° ì¬ì‹¤í–‰
gh run rerun <run-id>
```

### ğŸ”§ **ì¼ë°˜ì ì¸ ë¬¸ì œë“¤**

#### 1. Shell Tests ì‹¤íŒ¨
```bash
# ë¡œì»¬ì—ì„œ ì¬í˜„
just test-all              # ì „ì²´ í…ŒìŠ¤íŠ¸
just test-unit             # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ
just test-integration      # í†µí•© í…ŒìŠ¤íŠ¸ë§Œ

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ë””ë²„ê¹…
./run_shell_tests.sh --verbose
```

#### 2. Docker Build ì‹¤íŒ¨
```bash
# ë¡œì»¬ì—ì„œ ë¹Œë“œ í…ŒìŠ¤íŠ¸
just cpu                   # CPU ë²„ì „ ë¹Œë“œ
just check-env             # í™˜ê²½ ì„¤ì • í™•ì¸

# ë²„ì „ ì¼ê´€ì„± í™•ì¸
./dev-tools/simple-version-test.sh
```

#### 3. Git Merge ì¶©ëŒ
```bash
# ìˆ˜ë™ í•´ê²° (ìë™ í•´ê²° ë¶ˆê°€ëŠ¥í•œ ê²½ìš°)
git checkout main
git pull origin main
git checkout dev
git rebase main             # ì¶©ëŒ í•´ê²°
git push origin dev --force-with-lease
```

#### 4. ê¸´ê¸‰ ìˆ˜ë™ ë¨¸ì§€
```bash
# CI/CD ìš°íšŒí•˜ì—¬ ì§ì ‘ ë¨¸ì§€ (ë¹„ìƒì‹œë§Œ)
git checkout main
git pull origin main
git merge dev --no-ff -m "Emergency merge"
git push origin main
```

## ğŸ¯ ì ìš© ê°€ì´ë“œë¼ì¸

### âœ… **ì´ ì‹œìŠ¤í…œì´ ì í•©í•œ ê²½ìš°**

- ğŸ‘¤ **ê°œì¸ í”„ë¡œì íŠ¸**
- ğŸ‘¥ **ì†Œê·œëª¨ íŒ€** (1-3ëª…)
- ğŸš€ **ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘**
- ğŸ§ª **ìë™í™”ëœ í…ŒìŠ¤íŠ¸ê°€ ì¶©ë¶„í•œ ê²½ìš°**
- âš¡ **ë¹ ë¥¸ í”¼ë“œë°±ì´ ì¤‘ìš”í•œ ê²½ìš°**

### âŒ **ì´ ì‹œìŠ¤í…œì´ ë¶€ì í•©í•œ ê²½ìš°**

- ğŸ¢ **ëŒ€ê·œëª¨ íŒ€ í”„ë¡œì íŠ¸**
- ğŸ‘ï¸ **ì½”ë“œ ë¦¬ë·°ê°€ í•„ìˆ˜ì¸ í™˜ê²½**
- ğŸ“‹ **ê·œì œê°€ ë§ì€ ì‚°ì—…** (ê¸ˆìœµ, ì˜ë£Œ ë“±)
- ğŸ”’ **ì—„ê²©í•œ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš°**
- ğŸ“ **ë¬¸ì„œí™” ë° ì¶”ì ì´ ì¤‘ìš”í•œ ê²½ìš°**

## ğŸ”® í–¥í›„ ê°œì„  ê³„íš

### ğŸ“… **ë‹¨ê¸° ê³„íš** (1-2ê°œì›”)

- [ ] `[skip-ci]` ì»¤ë°‹ ë©”ì‹œì§€ íƒœê·¸ ì§€ì›
- [ ] ì‹¤íŒ¨ ì‹œ Slack/Discord ì•Œë¦¼ í†µí•©
- [ ] ë” ìƒì„¸í•œ ë¹Œë“œ ì„±ëŠ¥ ë¦¬í¬íŠ¸
- [ ] main ë¸Œëœì¹˜ ë³´í˜¸ ê·œì¹™ ì¶”ê°€ (optional)

### ğŸ¯ **ì¥ê¸° ê³„íš** (3-6ê°œì›”)

- [ ] ìŠ¤í…Œì´ì§• í™˜ê²½ ìë™ ë°°í¬
- [ ] ìë™ ë°±ì—… ë° ë¡¤ë°± ì‹œìŠ¤í…œ
- [ ] ë¦´ë¦¬ì¦ˆ íƒœê·¸ ìë™ ìƒì„±
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ìë™ ì‹¤í–‰
- [ ] ë³´ì•ˆ ì·¨ì•½ì  ìë™ ìŠ¤ìº”

---

## ğŸ“ ìš”ì•½

**No PR ì§ì ‘ ë¨¸ì§€ CI/CD ì‹œìŠ¤í…œ**ì€ ê°œì¸ í”„ë¡œì íŠ¸ì˜ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” í˜ì‹ ì ì¸ ì ‘ê·¼ë²•ì…ë‹ˆë‹¤:

1. **dev ë¸Œëœì¹˜ì—ì„œ ê°œë°œ** â†’ 2. **ìë™ í…ŒìŠ¤íŠ¸/ë¹Œë“œ** â†’ 3. **ì§ì ‘ main ë¨¸ì§€**

ë³µì¡í•œ PR í”„ë¡œì„¸ìŠ¤ë¥¼ ì œê±°í•˜ì—¬ **40-50% ë¹ ë¥¸ ë°°í¬**ì™€ **ê·¹ë‹¨ì ì¸ ë‹¨ìˆœí™”**ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. ê°œì¸ ì‘ì—…ì—ì„œëŠ” **ë‹¨ìˆœí•¨ì´ ìµœê³ ì˜ ë³µì¡í•¨ì„ ì´ê¹ë‹ˆë‹¤**! ğŸš€ 
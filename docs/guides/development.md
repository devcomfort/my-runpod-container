# ğŸ”§ ê°œë°œ ë° ë¹Œë“œ í™˜ê²½ ë¶„ë¦¬ ê°€ì´ë“œ

## ğŸ“‹ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ë¶„ë¦¬

### ğŸ¯ í•µì‹¬ ì›ì¹™

> **Docker ë¹Œë“œëŠ” ë¶ˆë³€ì„±ì„ ë³´ì¥í•´ì•¼ í•˜ë©°, ê°œë°œ í™˜ê²½ ì„¤ì •ê³¼ ëª…í™•íˆ ë¶„ë¦¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.**

## ğŸ”§ Development Time (ê°œë°œ ì‹œì )

**ê°œë°œìê°€ ë¡œì»¬ í™˜ê²½ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ë“¤**

### ğŸ“ ê´€ë ¨ íŒŒì¼ë“¤

| íŒŒì¼ | ì—­í•  | ì‹¤í–‰ ì£¼ì²´ |
|------|------|-----------|
| `.versions.env` | ì¤‘ì•™ ë²„ì „ ê´€ë¦¬ | ê°œë°œì |
| `scripts/update-versions.py` | ë²„ì „ ë™ê¸°í™” ë„êµ¬ | ê°œë°œì |
| `scripts/simple-version-test.sh` | ë¡œì»¬ í…ŒìŠ¤íŠ¸ | ê°œë°œì |
| `scripts/test-version-integration.sh` | í†µí•© í…ŒìŠ¤íŠ¸ | ê°œë°œì |
| `setup_multi_architecture_build.sh` | ë¹Œë“œ í™˜ê²½ ì„¤ì • | ê°œë°œì |

### ğŸš€ ê°œë°œì ì›Œí¬í”Œë¡œìš°

```bash
# 1. ë²„ì „ í™•ì¸ ë° ì—…ë°ì´íŠ¸
python3 scripts/update-versions.py --check-latest
python3 scripts/update-versions.py  # ì‹¤ì œ ë™ê¸°í™”

# 2. ë¡œì»¬ í…ŒìŠ¤íŠ¸
./scripts/simple-version-test.sh

# 3. ë¹Œë“œ í™˜ê²½ ì„¤ì • (ìµœì´ˆ 1íšŒ)
sudo ./setup_multi_architecture_build.sh

# 4. ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸
docker buildx bake --print cpu  # ì„¤ì • í™•ì¸
```

### âš ï¸ ê°œë°œ ì‹œì  ì£¼ì˜ì‚¬í•­

- `.versions.env` ìˆ˜ì • í›„ ë°˜ë“œì‹œ ë™ê¸°í™” ì‹¤í–‰
- ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¡œ ì¼ê´€ì„± í™•ì¸
- ë¹Œë“œ ì „ ë²„ì „ ì¶©ëŒ ì—†ëŠ”ì§€ ê²€ì¦

## ğŸ—ï¸ Build Time (ë¹Œë“œ ì‹œì )

**Dockerê°€ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ê³¼ì •**

### ğŸ“ ê´€ë ¨ íŒŒì¼ë“¤

| íŒŒì¼ | ì—­í•  | ì‹¤í–‰ ì£¼ì²´ |
|------|------|-----------|
| `Dockerfile` | ì´ë¯¸ì§€ ì •ì˜ | Docker Engine |
| `docker-bake.hcl` | ë¹Œë“œ ì„¤ì • | Docker Buildx |
| `ARG` ë³€ìˆ˜ë“¤ | ê³ ì • ë²„ì „ ì „ë‹¬ | Docker Build |
| `RUN` ëª…ë ¹ë“¤ | ë„êµ¬ ì„¤ì¹˜ | Docker Build |

### ğŸ”’ ë¹Œë“œ ì‹œì  íŠ¹ì§•

```dockerfile
# âœ… ì˜¬ë°”ë¥¸ ë¹Œë“œ ì‹œì  íŒ¨í„´
ARG GO_VERSION="1.23.4"  # ê³ ì • ë²„ì „
RUN curl -sSL "https://go.dev/dl/go${GO_VERSION}.linux-amd64.tar.gz" | tar -C /usr/local -xz

# âŒ ì˜ëª»ëœ ë¹Œë“œ ì‹œì  íŒ¨í„´  
RUN python3 scripts/update-versions.py  # ë™ì  ì—…ë°ì´íŠ¸ ë¶ˆê°€!
```

### ğŸ¯ ë¹Œë“œ ì‹œì  ì›ì¹™

- **ê³ ì •ì„±**: ëª¨ë“  ë²„ì „ì€ ë¹Œë“œ ì‹œ ê³ ì •
- **ì¬í˜„ì„±**: ì–¸ì œë“  ë™ì¼í•œ ì´ë¯¸ì§€ ìƒì„± ê°€ëŠ¥
- **ê²©ë¦¬ì„±**: ì™¸ë¶€ í™˜ê²½ ë³€í™”ì— ë…ë¦½ì 

## ğŸš€ Runtime (ëŸ°íƒ€ì„ ì‹œì )

**ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ëŠ” ê³¼ì •**

### ğŸ“ ê´€ë ¨ íŒŒì¼ë“¤

| íŒŒì¼ | ì—­í•  | ì‹¤í–‰ ì‹œì  |
|------|------|-----------|
| `scripts/start.sh` | ì»¨í…Œì´ë„ˆ ì§„ì…ì  | ì»¨í…Œì´ë„ˆ ì‹œì‘ |
| `src/serve-remote.py` | VS Code ì„œë²„ | ëŸ°íƒ€ì„ |
| `scripts/post_start.sh` | ì‹œì‘ í›„ ì„¤ì • | ëŸ°íƒ€ì„ |

### ğŸ”„ ëŸ°íƒ€ì„ íŠ¹ì§•

- **ê³ ì • ë„êµ¬**: ë¹Œë“œ ì‹œ ì„¤ì¹˜ëœ ë„êµ¬ ì‚¬ìš©
- **í™˜ê²½ ì„¤ì •**: ëŸ°íƒ€ì„ í™˜ê²½ ë³€ìˆ˜ ì ìš©
- **ì„œë¹„ìŠ¤ ì‹œì‘**: ì›¹ ì„œë²„, SSH ë“± ì‹œì‘

## ğŸ“‹ ì˜¬ë°”ë¥¸ ë¶„ë¦¬ ì˜ˆì‹œ

### âœ… ê°œë°œ í™˜ê²½ì—ì„œ

```bash
# ê°œë°œìê°€ ìƒˆ ë²„ì „ ë°œê²¬ ì‹œ
echo 'GH_VERSION=2.77.0' >> .versions.env
python3 scripts/update-versions.py  # ëª¨ë“  íŒŒì¼ ë™ê¸°í™”
./scripts/simple-version-test.sh     # í…ŒìŠ¤íŠ¸
```

### âœ… CI/CDì—ì„œ

```yaml
# GitHub Actions
- name: Build and push
  uses: docker/bake-action@v4
  with:
    files: ./docker-bake.hcl  # ë¹Œë“œ ì„¤ì •ë§Œ ì‚¬ìš©
    targets: cpu
    push: true
```

### âŒ í”¼í•´ì•¼ í•  íŒ¨í„´

```dockerfile
# Dockerfileì—ì„œ ì´ëŸ° ê²ƒë“¤ ê¸ˆì§€:
COPY scripts/update-versions.py /tmp/
RUN python3 /tmp/update-versions.py  # ë¹Œë“œ ì¤‘ ë™ì  ì—…ë°ì´íŠ¸ ê¸ˆì§€!
```

## ğŸ¯ ê¶Œì¥ ì‚¬í•­

### ğŸ”§ ê°œë°œììš©

1. **ë²„ì „ ì—…ë°ì´íŠ¸ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸**
   - [ ] `.versions.env` ë°±ì—…
   - [ ] `update-versions.py` ì‹¤í–‰
   - [ ] `simple-version-test.sh` í†µê³¼
   - [ ] ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸

2. **ë¹Œë“œ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸**
   - [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
   - [ ] `.versions.env`ì™€ ë‹¤ë¥¸ íŒŒì¼ ë™ê¸°í™” í™•ì¸
   - [ ] `docker-bake.hcl` ë¬¸ë²• ê²€ì¦

### ğŸ—ï¸ CI/CDìš©

1. **ë¹Œë“œ íŒŒì´í”„ë¼ì¸**
   - ê³ ì •ëœ ë¹Œë“œ ì„¤ì •ë§Œ ì‚¬ìš©
   - í™˜ê²½ ë³€ìˆ˜ë¡œ ë™ì  ìš”ì†Œ ìµœì†Œí™”
   - ìºì‹œ ì „ëµìœ¼ë¡œ ì†ë„ ìµœì í™”

2. **í…ŒìŠ¤íŠ¸ ìë™í™”**
   - ë¹Œë“œëœ ì´ë¯¸ì§€ ê¸°ëŠ¥ ê²€ì¦
   - ë‹¤ì¤‘ ì•„í‚¤í…ì²˜ í˜¸í™˜ì„± í™•ì¸

## ğŸš¨ ë¬¸ì œ í•´ê²°

### ë²„ì „ ë¶ˆì¼ì¹˜ ë°œìƒ ì‹œ

```bash
# 1. í˜„ì¬ ìƒíƒœ í™•ì¸
./scripts/simple-version-test.sh

# 2. ê°•ì œ ë™ê¸°í™”
python3 scripts/update-versions.py

# 3. ì¬ê²€ì¦
./scripts/simple-version-test.sh
```

### ë¹Œë“œ ì‹¤íŒ¨ ì‹œ

```bash
# 1. ë¹Œë“œ ì„¤ì • ê²€ì¦
docker buildx bake --print cpu

# 2. ë¬¸ë²• ê²€ì‚¬
docker buildx bake --help

# 3. ê°œë³„ íƒ€ê²Ÿ í…ŒìŠ¤íŠ¸
docker buildx bake cpu --dry-run
``` 